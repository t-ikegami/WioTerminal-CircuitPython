import uctypes as ct

ETM_ = {
  'CR'	: ( 0x00, {
    'reg'	:   0x00 | ct.UINT32,
    'ETMPD'	:   0x00 | ct.BFUINT32 |  0 << ct.BF_POS |  1 << ct.BF_LEN,
    'PORTSIZE'	:   0x00 | ct.BFUINT32 |  4 << ct.BF_POS |  3 << ct.BF_LEN,
    'STALL'	:   0x00 | ct.BFUINT32 |  7 << ct.BF_POS |  1 << ct.BF_LEN,
    'BROUT'	:   0x00 | ct.BFUINT32 |  8 << ct.BF_POS |  1 << ct.BF_LEN,
    'DBGRQ'	:   0x00 | ct.BFUINT32 |  9 << ct.BF_POS |  1 << ct.BF_LEN,
    'PROG'	:   0x00 | ct.BFUINT32 | 10 << ct.BF_POS |  1 << ct.BF_LEN,
    'PORTSEL'	:   0x00 | ct.BFUINT32 | 11 << ct.BF_POS |  1 << ct.BF_LEN,
    'PORTMODE2'	:   0x00 | ct.BFUINT32 | 13 << ct.BF_POS |  1 << ct.BF_LEN,
    'PORTMODE'	:   0x00 | ct.BFUINT32 | 16 << ct.BF_POS |  2 << ct.BF_LEN,
    'PORTSIZE3'	:   0x00 | ct.BFUINT32 | 21 << ct.BF_POS |  1 << ct.BF_LEN,
    'TSEN'	:   0x00 | ct.BFUINT32 | 28 << ct.BF_POS |  1 << ct.BF_LEN,
  }),
  'CCR'	: 0x04 | ct.UINT32,
  'TRIGGER'	: 0x08 | ct.UINT32,
  'SR'	: 0x10 | ct.UINT32,
  'SCR'	: 0x14 | ct.UINT32,
  'TEEVR'	: 0x20 | ct.UINT32,
  'TECR1'	: 0x24 | ct.UINT32,
  'FFLR'	: 0x28 | ct.UINT32,
  'CNTRLDVR1'	: 0x140 | ct.UINT32,
  'SYNCFR'	: 0x1E0 | ct.UINT32,
  'IDR'	: 0x1E4 | ct.UINT32,
  'CCER'	: 0x1E8 | ct.UINT32,
  'TESSEICR'	: 0x1F0 | ct.UINT32,
  'TSEVT'	: 0x1F8 | ct.UINT32,
  'TRACEIDR'	: 0x200 | ct.UINT32,
  'IDR2'	: 0x208 | ct.UINT32,
  'PDSR'	: 0x314 | ct.UINT32,
  'ITMISCIN'	: 0xEE0 | ct.UINT32,
  'ITTRIGOUT'	: 0xEE8 | ct.UINT32,
  'ITATBCTR2'	: 0xEF0 | ct.UINT32,
  'ITATBCTR0'	: 0xEF8 | ct.UINT32,
  'ITCTRL'	: ( 0xF00, {
    'reg'	:   0x00 | ct.UINT32,
    'INTEGRATION'	:   0x00 | ct.BFUINT32 |  0 << ct.BF_POS |  1 << ct.BF_LEN,
  }),
  'CLAIMSET'	: 0xFA0 | ct.UINT32,
  'CLAIMCLR'	: 0xFA4 | ct.UINT32,
  'LAR'	: 0xFB0 | ct.UINT32,
  'LSR'	: ( 0xFB4, {
    'reg'	:   0x00 | ct.UINT32,
    'Present'	:   0x00 | ct.BFUINT32 |  0 << ct.BF_POS |  1 << ct.BF_LEN,
    'Access'	:   0x00 | ct.BFUINT32 |  1 << ct.BF_POS |  1 << ct.BF_LEN,
    'ByteAcc'	:   0x00 | ct.BFUINT32 |  2 << ct.BF_POS |  1 << ct.BF_LEN,
  }),
  'AUTHSTATUS'	: 0xFB8 | ct.UINT32,
  'DEVTYPE'	: 0xFCC | ct.UINT32,
  'PIDR4'	: 0xFD0 | ct.UINT32,
  'PIDR5'	: 0xFD4 | ct.UINT32,
  'PIDR6'	: 0xFD8 | ct.UINT32,
  'PIDR7'	: 0xFDC | ct.UINT32,
  'PIDR0'	: 0xFE0 | ct.UINT32,
  'PIDR1'	: 0xFE4 | ct.UINT32,
  'PIDR2'	: 0xFE8 | ct.UINT32,
  'PIDR3'	: 0xFEC | ct.UINT32,
  'CIDR0'	: 0xFF0 | ct.UINT32,
  'CIDR1'	: 0xFF4 | ct.UINT32,
  'CIDR2'	: 0xFF8 | ct.UINT32,
  'CIDR3'	: 0xFFC | ct.UINT32,
}

ETM = ct.struct(0xe0041000, ETM_, ct.LITTLE_ENDIAN)
